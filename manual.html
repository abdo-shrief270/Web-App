<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="manual.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
    <title>Manual Control</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
<div id="logs_status">
        <p></p>
</div>
<div class="container">
    <div class="nav-bar">
        <div class="logo">
            <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M37.3337 28.6666C37.3337 36.9883 28.102 45.6549 25.002 48.3316C24.7132 48.5487 24.3617 48.6662 24.0003 48.6662C23.639 48.6662 23.2875 48.5487 22.9987 48.3316C19.8987 45.6549 10.667 36.9883 10.667 28.6666C10.667 25.1304 12.0718 21.739 14.5722 19.2385C17.0727 16.738 20.4641 15.3333 24.0003 15.3333C27.5365 15.3333 30.9279 16.738 33.4284 19.2385C35.9289 21.739 37.3337 25.1304 37.3337 28.6666Z" stroke="#007BFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M24.0003 33.6666C26.7617 33.6666 29.0003 31.428 29.0003 28.6666C29.0003 25.9052 26.7617 23.6666 24.0003 23.6666C21.2389 23.6666 19.0003 25.9052 19.0003 28.6666C19.0003 31.428 21.2389 33.6666 24.0003 33.6666Z" stroke="#007BFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M36 48H39M39 48C39 51.866 42.134 55 46 55M39 48C39 44.134 42.134 41 46 41M53 48H56M53 48C53 51.866 49.866 55 46 55M53 48C53 44.134 49.866 41 46 41M46 38V41M46 55V58M49 48C49 49.6569 47.6569 51 46 51C44.3431 51 43 49.6569 43 48C43 46.3431 44.3431 45 46 45C47.6569 45 49 46.3431 49 48Z" stroke="#007BFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>ATS</span>
        </div>

        <div class="list">
            <li style="cursor: pointer;"><a href="index.html">Home</a></li>
            <li style="cursor: pointer;"><a style="color: #007BFF;"href="manual.html">Manual control</a></li>
            <li style="cursor: pointer;"><a href="auto.html">Automatic control</a></li>
            <li style="cursor: pointer;"><a href="live.html">Live Stream</a></li>
            <li style="cursor: pointer;"><a href="test.html">Testing-methods</a></li>
            <li style="cursor: pointer;"><a href="register.html">Register</a></li>
            <li style="cursor: pointer;"><a href="login.html">Login</a></li>
        </div>
        <button id="sidebar-btn">
            <i id="xbar" class="fa-solid fa-bars"></i>
            <i id="xmark" class="fa-regular fa-circle-xmark"></i>
        </button>
        <div class="sidebar">
            <li style="cursor: pointer;"><a href="index.html">Home</a></li>
            <li style="cursor: pointer;"><a style="color: #007BFF;"href="manual.html">Manual control</a></li>
            <li style="cursor: pointer;"><a href="auto.html">Automatic control</a></li>
            <li style="cursor: pointer;"><a href="live.html">Live Stream</a></li>
            <li style="cursor: pointer;"><a href="test.html">Testing-methods</a></li>
            <li style="cursor: pointer;"><a href="register.html">Register</a></li>
            <li style="cursor: pointer;"><a href="login.html">Login</a></li>
        </div>

    </div>
    <div class="hero">
        <div class="left">
            <iframe src="https://www.wikipedia.org/" width="756" height="541"></iframe>
            <div id="control">
                <svg id="dis"  width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 11H10M8 9V13M15 12H15.01M18 10H18.01M17.32 5H6.68C5.69028 5.00023 4.73579 5.36738 4.00103 6.03046C3.26628 6.69355 2.80345 7.60549 2.702 8.59C2.696 8.642 2.692 8.691 2.685 8.742C2.604 9.416 2 14.456 2 16C2 16.7956 2.31607 17.5587 2.87868 18.1213C3.44129 18.6839 4.20435 19 5 19C6 19 6.5 18.5 7 18L8.414 16.586C8.78899 16.2109 9.29761 16.0001 9.828 16H14.172C14.7024 16.0001 15.211 16.2109 15.586 16.586L17 18C17.5 18.5 18 19 19 19C19.7956 19 20.5587 18.6839 21.1213 18.1213C21.6839 17.5587 22 16.7956 22 16C22 14.455 21.396 9.416 21.315 8.742C21.308 8.692 21.304 8.642 21.298 8.591C21.1968 7.60631 20.7341 6.69413 19.9993 6.03083C19.2645 5.36754 18.3099 5.00026 17.32 5Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <p  id="appear">Controls</p>
                <div id="moving">
                    <div class="moving" >
                        <p> Controls </p>
                        <p class="motion">W - Move forward</p>
                        <p class="motion">A - Turn left</p>
                        <p class="motion">S - Move backwards</p>
                        <p class="motion">D - Turn right</p>
                        <p class="motion">Q - Turn camera left</p>
                        <p class="motion">E - Turn camera right</p>
                    </div>
                </div>  
            </div>
        </div>
        <div class="right">
            <p class="logs">Logs</p>
            <div class="properties">
                <div class="info">
                    <div class="aa">Info</div>
                    <p class="para">Connection with server established</p>
                </div>
                <div class="info">
                    <div class="aa">Info</div>
                    <p class="para">All prototype hardware is operating normally</p>
                </div>
                <div class="info">
                    <div class="warning">Warning</div>
                    <p class="para">Battery below 50%</p>
                </div>
                <div class="info">
                    <div class="error">Error</div>
                    <p class="para">Connection with server lost</p>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="manual.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>    
<script>
    logs_status=document.getElementById("logs_status");
     const firebaseConfig = {
      apiKey: "AIzaSyCt3PpT9MV8TBlsgDmjvUngq-ZF1lNYQ2c",
      authDomain: "rpi-car-track.firebaseapp.com",
      databaseURL: "https://rpi-car-track-default-rtdb.firebaseio.com",
      projectId: "rpi-car-track",
      storageBucket: "rpi-car-track.firebasestorage.app",
      messagingSenderId: "603017187064",
      appId: "1:603017187064:web:c8da4c7a71d9745fe8b50d",
      measurementId: "G-GEM4R145LE"
    };
  
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Map Initialization
    var map = L.map('more').setView([0, 0], 15); // Default center (can be updated later)

    // OpenStreetMap Layer
    var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: ''
    });
    osm.addTo(map);

    // Marker and Circle Variables
    var marker;

    // Function to update map with new coordinates
    function updateMap(latitude, longitude, accuracy = 50) {
        if (marker) {
            map.removeLayer(marker);
        }

        if (circle) {
            map.removeLayer(circle);
        }

        // Add Marker and Circle
        marker = L.marker([latitude, longitude]).addTo(map);
        circle = L.circle([latitude, longitude], { radius: accuracy }).addTo(map);

        // Fit bounds around the marker and circle
        var featureGroup = L.featureGroup([marker, circle]).addTo(map);
        map.fitBounds(featureGroup.getBounds());

        //console.log(`Updated Map: Latitude: ${latitude}, Longitude: ${longitude}`);
    }
                                           ///////logs-Status 
                                           const status_s = firebase.database().ref('log');
    status_s.on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            const { status, text } = data;

            logs_status.innerText = text;
            if(status=="info"){
                logs_status.style.color = "#000";
                logs_status.style.backgroundColor = "#6EACDA";
            }
            if(status=="warning"){
                logs_status.style.backgroundColor = "#FFC107";
                logs_status.style.color = "#000";
            }
            if(status=="error"){
                logs_status.style.backgroundColor = "#DC3545";
                logs_status.style.color = "#fff";
            }
        }
    });
</script>
</body>
</html>